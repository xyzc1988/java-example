<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type="text/javascript" src="../js/jquery/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="../js/pagination/jqPagination.js"></script>
    <script type="text/javascript" src="../js/pagination/jquery.pagination.js"></script>

    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../js/pagination/pager.css"/>
    <link rel="stylesheet" href="../js/pagination/pagination.css"/>
    <script type="text/javascript">
        $(function () {
            $.ajax({
                url: "../image/getBase64Image",
                type: "GET"
            }).then(function (data) {
                $("#image1").attr("src", data);

            });

            /* preloadimages(["./page/getImage"])*/

        });


        function preloadimages(arr) {
            var newimages = [], loadedimages = 0;
            var arr = (typeof arr != "object") ? [arr] : arr;

            function imageloadpost() {
                loadedimages++
                if (loadedimages == arr.length) {
                    alert("图片已经加载完成")
                }
            }

            for (var i = 0; i < arr.length; i++) {
                newimages[i] = new Image();
                newimages[i].src = arr[i];
                newimages[i].onload = function () {
                    imageloadpost()
                };
                newimages[i].onerror = function () {
                    imageloadpost()
                }
            }
        }
    </script>
</head>
<body>
<div>
    <img id="image2" src="../image/getImageBody" style="width: 100px;height: 100px;"/>
    <img id="image" src="../image/getImage" style="width: 50px;height: 50px;"/>
    <img id="image1" style="width: 50px;height: 50px;"/>
</div>


</body>
</html>
